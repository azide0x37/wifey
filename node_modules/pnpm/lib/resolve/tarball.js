var basename = require('path').basename;
var crypto = require('crypto');

/**
 * Resolves a 'remote' package.
 *
 *     pkg = {
 *       raw: 'http://registry.npmjs.org/is-array/-/is-array-1.0.1.tgz',
 *       scope: null,
 *       name: null,
 *       rawSpec: 'http://registry.npmjs.org/is-array/-/is-array-1.0.1.tgz',
 *       spec: 'http://registry.npmjs.org/is-array/-/is-array-1.0.1.tgz',
 *       type: 'remote' }
 *     resolveTarball(pkg)
 */

module.exports = function resolveTarball(pkg) {
  var name = basename(pkg.raw).replace(/(\.tgz|\.tar\.gz)$/i, '');

  return Promise.resolve({
    name: name,
    fullname: name + '#' + hash(pkg.raw),
    dist: {
      tarball: pkg.raw
    }
  });
};

function hash(str) {
  var hash = crypto.createHash('sha1');
  hash.update(str);
  return hash.digest('hex');
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYn4vcmVzb2x2ZS90YXJiYWxsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUksV0FBVyxRQUFRLE1BQVIsRUFBZ0IsUUFBL0I7QUFDQSxJQUFJLFNBQVMsUUFBUSxRQUFSLENBQWI7Ozs7Ozs7Ozs7Ozs7OztBQWVBLE9BQU8sT0FBUCxHQUFpQixTQUFTLGNBQVQsQ0FBeUIsR0FBekIsRUFBOEI7QUFDN0MsTUFBSSxPQUFPLFNBQVMsSUFBSSxHQUFiLEVBQWtCLE9BQWxCLENBQTBCLHFCQUExQixFQUFpRCxFQUFqRCxDQUFYOztBQUVBLFNBQU8sUUFBUSxPQUFSLENBQWdCO0FBQ3JCLFVBQU0sSUFEZTtBQUVyQixjQUFVLE9BQU8sR0FBUCxHQUFhLEtBQUssSUFBSSxHQUFULENBRkY7QUFHckIsVUFBTTtBQUNKLGVBQVMsSUFBSTtBQURUO0FBSGUsR0FBaEIsQ0FBUDtBQU9ELENBVkQ7O0FBWUEsU0FBUyxJQUFULENBQWUsR0FBZixFQUFvQjtBQUNsQixNQUFJLE9BQU8sT0FBTyxVQUFQLENBQWtCLE1BQWxCLENBQVg7QUFDQSxPQUFLLE1BQUwsQ0FBWSxHQUFaO0FBQ0EsU0FBTyxLQUFLLE1BQUwsQ0FBWSxLQUFaLENBQVA7QUFDRCIsImZpbGUiOiJ0YXJiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJhc2VuYW1lID0gcmVxdWlyZSgncGF0aCcpLmJhc2VuYW1lXG52YXIgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJylcblxuLyoqXG4gKiBSZXNvbHZlcyBhICdyZW1vdGUnIHBhY2thZ2UuXG4gKlxuICogICAgIHBrZyA9IHtcbiAqICAgICAgIHJhdzogJ2h0dHA6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvaXMtYXJyYXkvLS9pcy1hcnJheS0xLjAuMS50Z3onLFxuICogICAgICAgc2NvcGU6IG51bGwsXG4gKiAgICAgICBuYW1lOiBudWxsLFxuICogICAgICAgcmF3U3BlYzogJ2h0dHA6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvaXMtYXJyYXkvLS9pcy1hcnJheS0xLjAuMS50Z3onLFxuICogICAgICAgc3BlYzogJ2h0dHA6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvaXMtYXJyYXkvLS9pcy1hcnJheS0xLjAuMS50Z3onLFxuICogICAgICAgdHlwZTogJ3JlbW90ZScgfVxuICogICAgIHJlc29sdmVUYXJiYWxsKHBrZylcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlc29sdmVUYXJiYWxsIChwa2cpIHtcbiAgdmFyIG5hbWUgPSBiYXNlbmFtZShwa2cucmF3KS5yZXBsYWNlKC8oXFwudGd6fFxcLnRhclxcLmd6KSQvaSwgJycpXG5cbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgbmFtZTogbmFtZSxcbiAgICBmdWxsbmFtZTogbmFtZSArICcjJyArIGhhc2gocGtnLnJhdyksXG4gICAgZGlzdDoge1xuICAgICAgdGFyYmFsbDogcGtnLnJhd1xuICAgIH1cbiAgfSlcbn1cblxuZnVuY3Rpb24gaGFzaCAoc3RyKSB7XG4gIHZhciBoYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTEnKVxuICBoYXNoLnVwZGF0ZShzdHIpXG4gIHJldHVybiBoYXNoLmRpZ2VzdCgnaGV4Jylcbn1cbiJdfQ==