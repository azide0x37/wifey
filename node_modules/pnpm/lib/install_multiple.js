var install = require('./install');

/*
 * Install multiple modules into `modules`.
 *
 *     ctx = { }
 *     installMultiple(ctx, ['minimatch@2'], './node_modules')
 *     installMultiple(ctx, { minimatch: '^2.0.0' }, './node_modules')
 */

module.exports = function installMultiple(ctx, pkgs, modules, options) {
  pkgs = arrayify(pkgs);
  return Promise.all(pkgs.map(function (pkg) {
    return install(ctx, pkg, modules, options);
  }));
};

function arrayify(pkgs) {
  if (!pkgs) return [];
  if (typeof pkgs !== 'object') return [pkgs];
  if (Array.isArray(pkgs)) return pkgs;

  return Object.keys(pkgs).map(function (name) {
    return '' + name + '@' + pkgs[name];
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2xpYn4vaW5zdGFsbF9tdWx0aXBsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLFVBQVUsUUFBUSxXQUFSLENBQWQ7Ozs7Ozs7Ozs7QUFVQSxPQUFPLE9BQVAsR0FBaUIsU0FBUyxlQUFULENBQTBCLEdBQTFCLEVBQStCLElBQS9CLEVBQXFDLE9BQXJDLEVBQThDLE9BQTlDLEVBQXVEO0FBQ3RFLFNBQU8sU0FBUyxJQUFULENBQVA7QUFDQSxTQUFPLFFBQVEsR0FBUixDQUFZLEtBQUssR0FBTCxDQUFTLFVBQVUsR0FBVixFQUFlO0FBQ3pDLFdBQU8sUUFBUSxHQUFSLEVBQWEsR0FBYixFQUFrQixPQUFsQixFQUEyQixPQUEzQixDQUFQO0FBQ0QsR0FGa0IsQ0FBWixDQUFQO0FBR0QsQ0FMRDs7QUFPQSxTQUFTLFFBQVQsQ0FBbUIsSUFBbkIsRUFBeUI7QUFDdkIsTUFBSSxDQUFDLElBQUwsRUFBVyxPQUFPLEVBQVA7QUFDWCxNQUFJLE9BQU8sSUFBUCxLQUFnQixRQUFwQixFQUE4QixPQUFPLENBQUUsSUFBRixDQUFQO0FBQzlCLE1BQUksTUFBTSxPQUFOLENBQWMsSUFBZCxDQUFKLEVBQXlCLE9BQU8sSUFBUDs7QUFFekIsU0FBTyxPQUFPLElBQVAsQ0FBWSxJQUFaLEVBQWtCLEdBQWxCLENBQXNCLGdCQUFRO0FBQ25DLFdBQU8sS0FBSyxJQUFMLEdBQVksR0FBWixHQUFrQixLQUFLLElBQUwsQ0FBekI7QUFDRCxHQUZNLENBQVA7QUFHRCIsImZpbGUiOiJpbnN0YWxsX211bHRpcGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGluc3RhbGwgPSByZXF1aXJlKCcuL2luc3RhbGwnKVxuXG4vKlxuICogSW5zdGFsbCBtdWx0aXBsZSBtb2R1bGVzIGludG8gYG1vZHVsZXNgLlxuICpcbiAqICAgICBjdHggPSB7IH1cbiAqICAgICBpbnN0YWxsTXVsdGlwbGUoY3R4LCBbJ21pbmltYXRjaEAyJ10sICcuL25vZGVfbW9kdWxlcycpXG4gKiAgICAgaW5zdGFsbE11bHRpcGxlKGN0eCwgeyBtaW5pbWF0Y2g6ICdeMi4wLjAnIH0sICcuL25vZGVfbW9kdWxlcycpXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbnN0YWxsTXVsdGlwbGUgKGN0eCwgcGtncywgbW9kdWxlcywgb3B0aW9ucykge1xuICBwa2dzID0gYXJyYXlpZnkocGtncylcbiAgcmV0dXJuIFByb21pc2UuYWxsKHBrZ3MubWFwKGZ1bmN0aW9uIChwa2cpIHtcbiAgICByZXR1cm4gaW5zdGFsbChjdHgsIHBrZywgbW9kdWxlcywgb3B0aW9ucylcbiAgfSkpXG59XG5cbmZ1bmN0aW9uIGFycmF5aWZ5IChwa2dzKSB7XG4gIGlmICghcGtncykgcmV0dXJuIFtdXG4gIGlmICh0eXBlb2YgcGtncyAhPT0gJ29iamVjdCcpIHJldHVybiBbIHBrZ3MgXVxuICBpZiAoQXJyYXkuaXNBcnJheShwa2dzKSkgcmV0dXJuIHBrZ3NcblxuICByZXR1cm4gT2JqZWN0LmtleXMocGtncykubWFwKG5hbWUgPT4ge1xuICAgIHJldHVybiAnJyArIG5hbWUgKyAnQCcgKyBwa2dzW25hbWVdXG4gIH0pXG59XG4iXX0=